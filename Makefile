#######################################################################################################################
#   file:           Makefile
#   description:    Root Makefile
#   author:         (C) 2021 PlayerCatboy (Ralf Ren).
#   date:           Feb.4, 2020
#######################################################################################################################

#######################################################################################################################
#   board selection
#######################################################################################################################
include source/board/rpi-pico/rpi-pico.mk

#######################################################################################################################
#   output settings
#######################################################################################################################
OUTPUT_DIR := build
OBJECT_DIR := ${OUTPUT_DIR}/obj

#######################################################################################################################
#   cross compiler settings
#######################################################################################################################
XCP_PREFIX := arm-none-eabi
XCP_GCC    := ${XCP_PREFIX}-gcc
XCP_AS     := ${XCP_PREFIX}-as
XCP_LD     := ${XCP_PREFIX}-ld
XCP_OBJCPY := ${XCP_PREFIX}-objcopy
XCP_FLAG   := -Wall -O2 -mcpu=cortex-m0plus

#######################################################################################################################
#   include path settings
#######################################################################################################################
INC_PATH   := \
-I source/ \
-I chiara/

#######################################################################################################################
#   Makefile entry
#######################################################################################################################
.PHONY: all
all:	board_all
	${XCP_GCC} ${XCP_FLAG} ${INC_PATH} ${BOARD_FLAG} -c source/start.c -o ${OBJECT_DIR}/start.o
	

.PHONY: clean
clean:	board_clean
	rm -f ${OBJECT_DIR}/*
	rm -f ${OUTPUT_DIR}/${BOARD_ID}.*
	
#######################################################################################################################
#   end
#######################################################################################################################
